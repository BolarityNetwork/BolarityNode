const { Keyring } = require('@polkadot/api');
const {ethers} = require('ethers');

async function main() {
    // connect to local chain
    const privateKey = '0x5fb92d6e98884f76de468fa3f6278f8807c48bebc13595d45af5bdc4da702133'; // Alith
    const keyring = new Keyring({ type: 'ethereum' });
    const callerAccount = keyring.addFromUri(privateKey, null, 'ethereum');
    console.log(`caller account address: ${callerAccount.address}`);

    // deploy evm contract
    const providerUrl = 'http://localhost:9944';

    // compiled from hybridvm/external/contract/src/erc20evm/TestEvmToken.sol
    const abi = [
        {
            "inputs": [],
            "stateMutability": "nonpayable",
            "type": "constructor"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "spender",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "allowance",
                    "type": "uint256"
                },
                {
                    "internalType": "uint256",
                    "name": "needed",
                    "type": "uint256"
                }
            ],
            "name": "ERC20InsufficientAllowance",
            "type": "error"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "sender",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "balance",
                    "type": "uint256"
                },
                {
                    "internalType": "uint256",
                    "name": "needed",
                    "type": "uint256"
                }
            ],
            "name": "ERC20InsufficientBalance",
            "type": "error"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "approver",
                    "type": "address"
                }
            ],
            "name": "ERC20InvalidApprover",
            "type": "error"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "receiver",
                    "type": "address"
                }
            ],
            "name": "ERC20InvalidReceiver",
            "type": "error"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "sender",
                    "type": "address"
                }
            ],
            "name": "ERC20InvalidSender",
            "type": "error"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "spender",
                    "type": "address"
                }
            ],
            "name": "ERC20InvalidSpender",
            "type": "error"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "owner",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "spender",
                    "type": "address"
                },
                {
                    "indexed": false,
                    "internalType": "uint256",
                    "name": "value",
                    "type": "uint256"
                }
            ],
            "name": "Approval",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "from",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "to",
                    "type": "address"
                },
                {
                    "indexed": false,
                    "internalType": "uint256",
                    "name": "value",
                    "type": "uint256"
                }
            ],
            "name": "Transfer",
            "type": "event"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "owner",
                    "type": "address"
                },
                {
                    "internalType": "address",
                    "name": "spender",
                    "type": "address"
                }
            ],
            "name": "allowance",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "spender",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "value",
                    "type": "uint256"
                }
            ],
            "name": "approve",
            "outputs": [
                {
                    "internalType": "bool",
                    "name": "",
                    "type": "bool"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "account",
                    "type": "address"
                }
            ],
            "name": "balanceOf",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "decimals",
            "outputs": [
                {
                    "internalType": "uint8",
                    "name": "",
                    "type": "uint8"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "string",
                    "name": "p",
                    "type": "string"
                },
                {
                    "internalType": "uint256[]",
                    "name": "u",
                    "type": "uint256[]"
                }
            ],
            "name": "echo",
            "outputs": [
                {
                    "internalType": "string",
                    "name": "",
                    "type": "string"
                },
                {
                    "internalType": "uint256[]",
                    "name": "",
                    "type": "uint256[]"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "bytes20",
                    "name": "bob",
                    "type": "bytes20"
                },
                {
                    "internalType": "uint256",
                    "name": "value",
                    "type": "uint256"
                },
                {
                    "internalType": "bytes20",
                    "name": "contractid",
                    "type": "bytes20"
                }
            ],
            "name": "evmCallWasm",
            "outputs": [
                {
                    "internalType": "string",
                    "name": "",
                    "type": "string"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "bytes32",
                    "name": "bob",
                    "type": "bytes32"
                },
                {
                    "internalType": "bytes32",
                    "name": "contractid",
                    "type": "bytes32"
                }
            ],
            "name": "evmCallWasmBalance",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "string",
                    "name": "callData",
                    "type": "string"
                }
            ],
            "name": "evmCallWasmProxy",
            "outputs": [
                {
                    "internalType": "string",
                    "name": "",
                    "type": "string"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "name",
            "outputs": [
                {
                    "internalType": "string",
                    "name": "",
                    "type": "string"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "symbol",
            "outputs": [
                {
                    "internalType": "string",
                    "name": "",
                    "type": "string"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "totalSupply",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "to",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "value",
                    "type": "uint256"
                }
            ],
            "name": "transfer",
            "outputs": [
                {
                    "internalType": "bool",
                    "name": "",
                    "type": "bool"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "from",
                    "type": "address"
                },
                {
                    "internalType": "address",
                    "name": "to",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "value",
                    "type": "uint256"
                }
            ],
            "name": "transferFrom",
            "outputs": [
                {
                    "internalType": "bool",
                    "name": "",
                    "type": "bool"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "function"
        }
    ]
    const bytecode = '608060405234801562000010575f80fd5b506040518060400160405280600c81526020017f5465737445766d546f6b656e00000000000000000000000000000000000000008152506040518060400160405280600381526020017f544554000000000000000000000000000000000000000000000000000000000081525081600390816200008e9190620005da565b508060049081620000a09190620005da565b505050620000c2336c0c9f2c9cd04674edea40000000620000c860201b60201c565b620007ea565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036200013b575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040162000132919062000701565b60405180910390fd5b6200014e5f83836200015260201b60201c565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603620001a6578060025f82825462000199919062000749565b9250508190555062000277565b5f805f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490508181101562000232578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401620002299392919062000794565b60405180910390fd5b8181035f808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620002c0578060025f82825403925050819055506200030a565b805f808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051620003699190620007cf565b60405180910390a3505050565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680620003f257607f821691505b602082108103620004085762000407620003ad565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026200046c7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200042f565b6200047886836200042f565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f620004c2620004bc620004b68462000490565b62000499565b62000490565b9050919050565b5f819050919050565b620004dd83620004a2565b620004f5620004ec82620004c9565b8484546200043b565b825550505050565b5f90565b6200050b620004fd565b62000518818484620004d2565b505050565b5b818110156200053f57620005335f8262000501565b6001810190506200051e565b5050565b601f8211156200058e5762000558816200040e565b620005638462000420565b8101602085101562000573578190505b6200058b620005828562000420565b8301826200051d565b50505b505050565b5f82821c905092915050565b5f620005b05f198460080262000593565b1980831691505092915050565b5f620005ca83836200059f565b9150826002028217905092915050565b620005e58262000376565b67ffffffffffffffff81111562000601576200060062000380565b5b6200060d8254620003da565b6200061a82828562000543565b5f60209050601f83116001811462000650575f84156200063b578287015190505b620006478582620005bd565b865550620006b6565b601f19841662000660866200040e565b5f5b82811015620006895784890151825560018201915060208501945060208101905062000662565b86831015620006a95784890151620006a5601f8916826200059f565b8355505b6001600288020188555050505b505050505050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f620006e982620006be565b9050919050565b620006fb81620006dd565b82525050565b5f602082019050620007165f830184620006f0565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f620007558262000490565b9150620007628362000490565b92508282019050808211156200077d576200077c6200071c565b5b92915050565b6200078e8162000490565b82525050565b5f606082019050620007a95f830186620006f0565b620007b8602083018562000783565b620007c7604083018462000783565b949350505050565b5f602082019050620007e45f83018462000783565b92915050565b6123ba80620007f85f395ff3fe608060405234801561000f575f80fd5b50600436106100cd575f3560e01c80634fbd20c41161008a57806395d89b411161006457806395d89b411461024c578063a9059cbb1461026a578063ac18c6b61461029a578063dd62ed3e146102ca576100cd565b80634fbd20c4146101bb578063591ed251146101ec57806370a082311461021c576100cd565b806301eb3eac146100d157806306fdde0314610101578063095ea7b31461011f57806318160ddd1461014f57806323b872dd1461016d578063313ce5671461019d575b5f80fd5b6100eb60048036038101906100e69190611707565b6102fa565b6040516100f891906117e1565b60405180910390f35b61010961040d565b60405161011691906117e1565b60405180910390f35b6101396004803603810190610134919061185b565b61049d565b60405161014691906118b3565b60405180910390f35b6101576104bf565b60405161016491906118db565b60405180910390f35b610187600480360381019061018291906118f4565b6104c8565b60405161019491906118b3565b60405180910390f35b6101a56104f6565b6040516101b2919061195f565b60405180910390f35b6101d560048036038101906101d09190611b68565b6104fe565b6040516101e3929190611c95565b60405180910390f35b61020660048036038101906102019190611cfd565b61050e565b60405161021391906118db565b60405180910390f35b61023660048036038101906102319190611d3b565b6105f4565b60405161024391906118db565b60405180910390f35b610254610639565b60405161026191906117e1565b60405180910390f35b610284600480360381019061027f919061185b565b6106c9565b60405161029191906118b3565b60405180910390f35b6102b460048036038101906102af9190611d66565b6106eb565b6040516102c191906117e1565b60405180910390f35b6102e460048036038101906102df9190611dad565b6106fd565b6040516102f191906118db565b60405180910390f35b60605f6040518060400160405280601b81526020017f7b22564d223a227761736d222c20224163636f756e74223a22307800000000008152509050610347816103428561077f565b6108f6565b905061036b816040518060800160405280604b81526020016122c8604b91396108f6565b905061037f8161037a8761077f565b6108f6565b90506103c0816040518060400160405280600381526020017f222c2200000000000000000000000000000000000000000000000000000000008152506108f6565b90506103d4816103cf86610a5b565b6108f6565b90506103f8816040518060600160405280602c8152602001612359602c91396108f6565b905061040381610bc0565b9150509392505050565b60606003805461041c90611e18565b80601f016020809104026020016040519081016040528092919081815260200182805461044890611e18565b80156104935780601f1061046a57610100808354040283529160200191610493565b820191905f5260205f20905b81548152906001019060200180831161047657829003601f168201915b5050505050905090565b5f806104a7610c46565b90506104b4818585610c4d565b600191505092915050565b5f600254905090565b5f806104d2610c46565b90506104df858285610c5f565b6104ea858585610cf1565b60019150509392505050565b5f6012905090565b6060808383915091509250929050565b5f806040518060400160405280601b81526020017f7b22564d223a227761736d222c20224163636f756e74223a2230780000000000815250905061055a8161055585610de1565b6108f6565b905061057e81604051806080016040528060468152602001612313604691396108f6565b90506105928161058d86610de1565b6108f6565b90506105d3816040518060400160405280601c81526020017f225d2c20224f757470757454797065223a5b5b2275313238225d5d7d000000008152506108f6565b90505f6105df82610bc0565b90506105ea81610f5b565b9250505092915050565b5f805f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60606004805461064890611e18565b80601f016020809104026020016040519081016040528092919081815260200182805461067490611e18565b80156106bf5780601f10610696576101008083540402835291602001916106bf565b820191905f5260205f20905b8154815290600101906020018083116106a257829003601f168201915b5050505050905090565b5f806106d3610c46565b90506106e0818585610cf1565b600191505092915050565b60606106f682610bc0565b9050919050565b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b60605f602867ffffffffffffffff81111561079d5761079c611980565b5b6040519080825280601f01601f1916602001820160405280156107cf5781602001600182028036833780820191505090505b5090505f5b60148110156108ec5761080b60108583601481106107f5576107f4611e48565b5b1a60f81b60f81c6108069190611ecf565b6110d5565b826002836108199190611eff565b8151811061082a57610829611e48565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191690815f1a90535061088660108583601481106108705761086f611e48565b5b1a60f81b60f81c6108819190611f40565b6110d5565b8260016002846108969190611eff565b6108a09190611f70565b815181106108b1576108b0611e48565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191690815f1a90535080806001019150506107d4565b5080915050919050565b60605f825184516109079190611f70565b67ffffffffffffffff8111156109205761091f611980565b5b6040519080825280601f01601f1916602001820160405280156109525781602001600182028036833780820191505090505b5090505f5b84518110156109cc5784818151811061097357610972611e48565b5b602001015160f81c60f81b82828151811061099157610990611e48565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191690815f1a9053508080600101915050610957565b505f5b8351811015610a50578381815181106109eb576109ea611e48565b5b602001015160f81c60f81b82865183610a049190611f70565b81518110610a1557610a14611e48565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191690815f1a90535080806001019150506109cf565b508091505092915050565b60605f8203610aa1576040518060400160405280600181526020017f30000000000000000000000000000000000000000000000000000000000000008152509050610bbb565b5f8290505f5b5f8214610ad057600a82610abb9190611fa3565b91508080610ac890611fd3565b915050610aa7565b5f8167ffffffffffffffff811115610aeb57610aea611980565b5b6040519080825280601f01601f191660200182016040528015610b1d5781602001600182028036833780820191505090505b5090505b5f8514158015610b3057505f82115b15610bb4578180610b409061201a565b9250506030600a86610b529190612041565b610b5c9190612071565b60f81b818381518110610b7257610b71611e48565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191690815f1a905350600a85610bad9190611fa3565b9450610b21565b8093505050505b919050565b60605f60208351610bd19190611f70565b90505f61040067ffffffffffffffff811115610bf057610bef611980565b5b6040519080825280601f01601f191660200182016040528015610c225781602001600182028036833780820191505090505b5090505f5a9050610400828487606485f4610c3b575f80fd5b819350505050919050565b5f33905090565b610c5a8383836001611163565b505050565b5f610c6a84846106fd565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8114610ceb5781811015610cdc578281836040517ffb8f41b2000000000000000000000000000000000000000000000000000000008152600401610cd3939291906120b4565b60405180910390fd5b610cea84848484035f611163565b5b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610d61575f6040517f96c6fd1e000000000000000000000000000000000000000000000000000000008152600401610d5891906120e9565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610dd1575f6040517fec442f05000000000000000000000000000000000000000000000000000000008152600401610dc891906120e9565b60405180910390fd5b610ddc838383611332565b505050565b60605f604067ffffffffffffffff811115610dff57610dfe611980565b5b6040519080825280601f01601f191660200182016040528015610e315781602001600182028036833780820191505090505b5090505f5b602060ff16811015610f5157610e706010858360208110610e5a57610e59611e48565b5b1a60f81b60f81c610e6b9190611ecf565b6110d5565b82600283610e7e9190611eff565b81518110610e8f57610e8e611e48565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191690815f1a905350610eeb6010858360208110610ed557610ed4611e48565b5b1a60f81b60f81c610ee69190611f40565b6110d5565b826001600284610efb9190611eff565b610f059190611f70565b81518110610f1657610f15611e48565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191690815f1a9053508080600101915050610e36565b5080915050919050565b5f80610f9c836040518060400160405280601081526020017f2252657475726e56616c7565223a5b220000000000000000000000000000000081525061154b565b90505f8111610fe0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610fd79061214c565b60405180910390fd5b5f8390505f805f6010600186610ff6919061216a565b6110009190611f70565b90505b60038451611011919061216a565b8110156110c85783818151811061102b5761102a611e48565b5b602001015160f81c60f81b60f81c915060308260ff1610158015611053575060398260ff1611155b611092576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110899061220d565b60405180910390fd5b60308261109f919061222b565b60ff16600a846110af9190611eff565b6110b99190611f70565b92508080600101915050611003565b5081945050505050919050565b5f60108260ff161061111c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611113906122a9565b60405180910390fd5b600a8260ff16101561113f576030826111359190612071565b60f81b905061115e565b606060098361114e919061222b565b6111589190612071565b60f81b90505b919050565b5f73ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036111d3575f6040517fe602df050000000000000000000000000000000000000000000000000000000081526004016111ca91906120e9565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603611243575f6040517f94280d6200000000000000000000000000000000000000000000000000000000815260040161123a91906120e9565b60405180910390fd5b8160015f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550801561132c578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9258460405161132391906118db565b60405180910390a35b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603611382578060025f8282546113769190611f70565b92505081905550611450565b5f805f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490508181101561140b578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401611402939291906120b4565b60405180910390fd5b8181035f808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603611497578060025f82825403925050819055506114e1565b805f808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405161153e91906118db565b60405180910390a3505050565b5f808390505f8390505f5b82518110156116615780835161156c919061216a565b8251111561157f575f9350505050611668565b5f5b8251811015611653578382826115979190611f70565b815181106115a8576115a7611e48565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19168382815181106115e8576115e7611e48565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916036116535760018351611628919061216a565b81036116465760018261163b9190611f70565b945050505050611668565b8080600101915050611581565b508080600101915050611556565b505f925050505b92915050565b5f604051905090565b5f80fd5b5f80fd5b5f7fffffffffffffffffffffffffffffffffffffffff00000000000000000000000082169050919050565b6116b38161167f565b81146116bd575f80fd5b50565b5f813590506116ce816116aa565b92915050565b5f819050919050565b6116e6816116d4565b81146116f0575f80fd5b50565b5f81359050611701816116dd565b92915050565b5f805f6060848603121561171e5761171d611677565b5b5f61172b868287016116c0565b935050602061173c868287016116f3565b925050604061174d868287016116c0565b9150509250925092565b5f81519050919050565b5f82825260208201905092915050565b5f5b8381101561178e578082015181840152602081019050611773565b5f8484015250505050565b5f601f19601f8301169050919050565b5f6117b382611757565b6117bd8185611761565b93506117cd818560208601611771565b6117d681611799565b840191505092915050565b5f6020820190508181035f8301526117f981846117a9565b905092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61182a82611801565b9050919050565b61183a81611820565b8114611844575f80fd5b50565b5f8135905061185581611831565b92915050565b5f806040838503121561187157611870611677565b5b5f61187e85828601611847565b925050602061188f858286016116f3565b9150509250929050565b5f8115159050919050565b6118ad81611899565b82525050565b5f6020820190506118c65f8301846118a4565b92915050565b6118d5816116d4565b82525050565b5f6020820190506118ee5f8301846118cc565b92915050565b5f805f6060848603121561190b5761190a611677565b5b5f61191886828701611847565b935050602061192986828701611847565b925050604061193a868287016116f3565b9150509250925092565b5f60ff82169050919050565b61195981611944565b82525050565b5f6020820190506119725f830184611950565b92915050565b5f80fd5b5f80fd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6119b682611799565b810181811067ffffffffffffffff821117156119d5576119d4611980565b5b80604052505050565b5f6119e761166e565b90506119f382826119ad565b919050565b5f67ffffffffffffffff821115611a1257611a11611980565b5b611a1b82611799565b9050602081019050919050565b828183375f83830152505050565b5f611a48611a43846119f8565b6119de565b905082815260208101848484011115611a6457611a6361197c565b5b611a6f848285611a28565b509392505050565b5f82601f830112611a8b57611a8a611978565b5b8135611a9b848260208601611a36565b91505092915050565b5f67ffffffffffffffff821115611abe57611abd611980565b5b602082029050602081019050919050565b5f80fd5b5f611ae5611ae084611aa4565b6119de565b90508083825260208201905060208402830185811115611b0857611b07611acf565b5b835b81811015611b315780611b1d88826116f3565b845260208401935050602081019050611b0a565b5050509392505050565b5f82601f830112611b4f57611b4e611978565b5b8135611b5f848260208601611ad3565b91505092915050565b5f8060408385031215611b7e57611b7d611677565b5b5f83013567ffffffffffffffff811115611b9b57611b9a61167b565b5b611ba785828601611a77565b925050602083013567ffffffffffffffff811115611bc857611bc761167b565b5b611bd485828601611b3b565b9150509250929050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b611c10816116d4565b82525050565b5f611c218383611c07565b60208301905092915050565b5f602082019050919050565b5f611c4382611bde565b611c4d8185611be8565b9350611c5883611bf8565b805f5b83811015611c88578151611c6f8882611c16565b9750611c7a83611c2d565b925050600181019050611c5b565b5085935050505092915050565b5f6040820190508181035f830152611cad81856117a9565b90508181036020830152611cc18184611c39565b90509392505050565b5f819050919050565b611cdc81611cca565b8114611ce6575f80fd5b50565b5f81359050611cf781611cd3565b92915050565b5f8060408385031215611d1357611d12611677565b5b5f611d2085828601611ce9565b9250506020611d3185828601611ce9565b9150509250929050565b5f60208284031215611d5057611d4f611677565b5b5f611d5d84828501611847565b91505092915050565b5f60208284031215611d7b57611d7a611677565b5b5f82013567ffffffffffffffff811115611d9857611d9761167b565b5b611da484828501611a77565b91505092915050565b5f8060408385031215611dc357611dc2611677565b5b5f611dd085828601611847565b9250506020611de185828601611847565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680611e2f57607f821691505b602082108103611e4257611e41611deb565b5b50919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f611ed982611944565b9150611ee483611944565b925082611ef457611ef3611e75565b5b828204905092915050565b5f611f09826116d4565b9150611f14836116d4565b9250828202611f22816116d4565b91508282048414831517611f3957611f38611ea2565b5b5092915050565b5f611f4a82611944565b9150611f5583611944565b925082611f6557611f64611e75565b5b828206905092915050565b5f611f7a826116d4565b9150611f85836116d4565b9250828201905080821115611f9d57611f9c611ea2565b5b92915050565b5f611fad826116d4565b9150611fb8836116d4565b925082611fc857611fc7611e75565b5b828204905092915050565b5f611fdd826116d4565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361200f5761200e611ea2565b5b600182019050919050565b5f612024826116d4565b91505f820361203657612035611ea2565b5b600182039050919050565b5f61204b826116d4565b9150612056836116d4565b92508261206657612065611e75565b5b828206905092915050565b5f61207b82611944565b915061208683611944565b9250828201905060ff81111561209f5761209e611ea2565b5b92915050565b6120ae81611820565b82525050565b5f6060820190506120c75f8301866120a5565b6120d460208301856118cc565b6120e160408301846118cc565b949350505050565b5f6020820190506120fc5f8301846120a5565b92915050565b7f43616c6c20526573756c74206572726f722100000000000000000000000000005f82015250565b5f612136601283611761565b915061214182612102565b602082019050919050565b5f6020820190508181035f8301526121638161212a565b9050919050565b5f612174826116d4565b915061217f836116d4565b925082820390508181111561219757612196611ea2565b5b92915050565b7f526573756c742062616c616e636520696e636c756465206e6f206e756d6265725f8201527f20737472696e6721000000000000000000000000000000000000000000000000602082015250565b5f6121f7602883611761565b91506122028261219d565b604082019050919050565b5f6020820190508181035f830152612224816121eb565b9050919050565b5f61223582611944565b915061224083611944565b9250828203905060ff81111561225957612258611ea2565b5b92915050565b7f6279746532686578202d2d2062206d757374203c2031360000000000000000005f82015250565b5f612293601783611761565b915061229e8261225f565b602082019050919050565b5f6020820190508181035f8301526122c081612287565b905091905056fe222c202246756e223a20227472616e73666572222c2022496e70757454797065223a205b226163636f756e746964222c2275313238225d2c2022496e70757456616c7565223a205b223078222c202246756e223a202262616c616e63655f6f66222c2022496e70757454797065223a205b226163636f756e746964225d2c2022496e70757456616c7565223a205b223078225d2c20224f757470757454797065223a5b5b22656e756d225d2c5b2230222c2232225d2c5b2230225d5d7da2646970667358221220b358e792c5b68a4213e1fcfd5a0455daf1f6005c96f6ac68bb58015c1093342664736f6c63430008160033'
    await deployEvmContract(abi, bytecode, privateKey, providerUrl);

    process.exit(0);
}

async function deployEvmContract(abi, bytecode, privateKey, providerUrl) {
    const provider = new ethers.JsonRpcProvider(providerUrl);
    const wallet = new ethers.Wallet(privateKey, provider);
    const contractFactory = new ethers.ContractFactory(abi, bytecode, wallet);
    let evmContract = await contractFactory.deploy();
    await evmContract.waitForDeployment();

    const evmContractAddress = evmContract.target;
    console.log('EVM contract deployed at address:', evmContractAddress);

    return evmContractAddress;
}

main().catch(console.error);